<!DOCTYPE html>
{% load static %}
<html lang="zxx">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Anime Template">
    <meta name="keywords" content="Anime, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Anime | Template</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@300;400;500;600;700;800;900&display=swap"
    rel="stylesheet">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="stylesheet" href="{% static 'web/css/icon_after_login.css' %}">
    <link rel="stylesheet" href="{% static 'web/css/profileBtn.css' %}">

    <!-- Css Styles -->
    <link rel="stylesheet" href="{% static 'web/css/bootstrap.min.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'web/css/font-awesome.min.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'web/css/elegant-icons.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'web/css/plyr.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'web/css/nice-select.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'web/css/owl.carousel.min.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'web/css/slicknav.min.css' %}" type="text/css">


    <link rel="stylesheet" href="{% static 'web/css/profile_page.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'web/css/style.css' %}" type="text/css">

    <link rel="stylesheet" href="{% static 'web/css/sidebar.css' %}" type="text/css">







</head>

<body>
    <!-- Page Preloder -->
    <div id="preloder">
        <div class="loader"></div>
    </div>

    <!-- Header Section Begin -->
    <header class="header" style="margin-top:5px;">

        <div class="container">

            <div class="row align-items-center py-2 bg-grey">
                  <!-- Admin icon -->
    <a href="{% url 'admin_login_page' %}" >
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
           fill="currentColor" class="bi bi-android2" viewBox="0 0 16 16">
        <path d="m10.213 1.471.691-1.26q.069-.124-.048-.192-.128-.057-.195.058l-.7 1.27A4.8 4.8 0 0 0 8.005.941q-1.032 0-1.956.404l-.7-1.27Q5.281-.037 5.154.02q-.117.069-.049.193l.691 1.259a4.25 4.25 0 0 0-1.673 1.476A3.7 3.7 0 0 0 3.5 5.02h9q0-1.125-.623-2.072a4.27 4.27 0 0 0-1.664-1.476ZM6.22 3.303a.37.37 0 0 1-.267.11.35.35 0 0 1-.263-.11.37.37 0 0 1-.107-.264.37.37 0 0 1 .107-.265.35.35 0 0 1 .263-.11q.155 0 .267.11a.36.36 0 0 1 .112.265.36.36 0 0 1-.112.264m4.101 0a.35.35 0 0 1-.262.11.37.37 0 0 1-.268-.11.36.36 0 0 1-.112-.264q0-.154.112-.265a.37.37 0 0 1 .268-.11q.155 0 .262.11a.37.37 0 0 1 .107.265q0 .153-.107.264M3.5 11.77q0 .441.311.75.311.306.76.307h.758l.01 2.182q0 .414.292.703a.96.96 0 0 0 .7.288.97.97 0 0 0 .71-.288.95.95 0 0 0 .292-.703v-2.182h1.343v2.182q0 .414.292.703a.97.97 0 0 0 .71.288.97.97 0 0 0 .71-.288.95.95 0 0 0 .292-.703v-2.182h.76q.436 0 .749-.308.31-.307.311-.75V5.365h-9zm10.495-6.587a.98.98 0 0 0-.702.278.9.9 0 0 0-.293.685v4.063q0 .406.293.69a.97.97 0 0 0 .702.284q.42 0 .712-.284a.92.92 0 0 0 .293-.69V6.146a.9.9 0 0 0-.293-.685 1 1 0 0 0-.712-.278m-12.702.283a1 1 0 0 1 .712-.283q.41 0 .702.283a.9.9 0 0 1 .293.68v4.063a.93.93 0 0 1-.288.69.97.97 0 0 1-.707.284 1 1 0 0 1-.712-.284.92.92 0 0 1-.293-.69V6.146q0-.396.293-.68"/>
      </svg>
    </a>

  <!-- Sidebar toggle -->
  <div class="col-auto">
  <div class="menu-toggle sidebars" onclick="toggleSidebar()">&#9776;</div>
  <div id="sidebar" class="sidebar">
    <a href="javascript:void(0)" class="close-btn" onclick="toggleSidebar()">Ã— Close</a>
    <a href="{% url 'filter_anime' 'version' 'sub' %}">Subbed Anime</a>
    <a href="{% url 'filter_anime' 'version' 'dub' %}">Dubbed Anime</a>
    <a href="{% url 'filter_anime' 'type' 'movie' %}">Movies</a>
    <a href="{% url 'filter_anime' 'type' 'tv-series' %}">TV Series</a>
    <a href="{% url 'filter_anime' 'type' 'ova' %}">OVAs</a>
    <a href="{% url 'filter_anime' 'type' 'ona' %}">ONAs</a>
  </div>
</div>

  <!-- Logo (centered) -->
  <div class="col text-center">
    <a href="{% url 'homepage' %}">
      <img src="{% static 'web/img/logo_name.png' %}"
           alt="Logo"
           class="img-fluid"
           style="max-height:50px;">
    </a>
  </div>

  <!-- Right side (admin + profile/login) -->
  <div class="col-auto align-items-center" >

    <!-- Profile or login -->
    {% if request.session.Name %}
    <div class="profile-container">
    <div class="circle" id="profileBtn">
        {% if user.Profile_Image %}
            <img src="{{ user.Profile_Image.url }}" alt="Profile" class="profile-icon">
        {% else %}
            <i class="fa fa-user"></i>
        {% endif %}
    </div>
    <div class="profile-dropdown" id="dropdownMenu">
        <a href="{% url 'profile_page' %}"><i class="fa fa-user"></i> Profile</a>
        <a href="{% url 'watch_list' %}"><i class="fa fa-list"></i> Watch List</a>
        <a href="{% url 'user_logout' %}"><i class="fa fa-sign-out-alt"></i> Logout</a>
    </div>
    </div>
    {% else %}
    <a href="{% url 'sign_in' %}" class="ms-2">
      <span class="icon_profile"></span>
    </a>
    {% endif %}
  </div>
</div>

            <div id="mobile-menu-wrap">

            </div>
        </div>
    </header>
    <!-- Header End -->


    <div class="main-div">
        <div class="pt-5">
            <h3 class="text-center greeting">Hi {{request.session.Name}}</h3>
        </div>
        <div class="d-flex align-items-center justify-content-center main-heading">
            <div class="headings">
                <a href="" class="headings" >Profile</a>
            </div>
            <div>
                <a href="{% url 'watch_list' %}" class="headings" >Watch List</a>
            </div>
            <div>
                <a href="{% url 'user_logout' %}" class="headings">Logout</a>
            </div>
        </div>
    </div>
    <div class="container content-div mb-3 ">
        <label>Profile</label>
     <form method="post" action="{% url 'edit_profile_page' %}" enctype="multipart/form-data">
    {% csrf_token %}
         <div class="d-flex" style="gap: 60px">

             <div class="image-upload-container">
        <label for="avatar-upload">
            <img id="profilePreview"
                 src="{% if user.Profile_Image %}{{ user.Profile_Image.url }}{% else %}{% static 'web/img/default_avatar.png' %}{% endif %}"
                 alt="Avatar"
                 class="avatar clickable">
        </label>
        <input type="file" id="avatar-upload" name="avatar" accept="image/*" style="display:none;">
     </div>
     <div class="mb-3">
         <label for="exampleFormControlInput1" class="form-label">Username</label>
         <input type="text" class="form-control"
                   id="exampleFormControlInput1"
                   placeholder="Username"
                   value="{{ user.UserName }}"
                   name="username">
     </div>

         </div>

    <div class="mb-3">
        <label for="exampleFormControlInput2" class="form-label">Email address</label>
        <input type="email" class="form-control"
               id="exampleFormControlInput2"
               placeholder="name@example.com"
               value="{{ user.E_Mail }}"
               name="email">
    </div>

        <div class="block">
                <a class="btn btn-sm btn-clear" data-toggle="collapse" href="#show-changepass" aria-expanded="false" aria-controls="show-changepass">
                    <i class="fas fa-key mr-2"></i>Change password
                </a>
            </div>

            <div id="show-changepass" class="mt-3 collapse">
                <div class="form-group">
                    <label class="prelabel" for="pro5-currentpass">Current Password</label>
                    <input type="password" class="form-control" id="pro5-currentpass" name="current_password" >
                </div>
                <div class="form-group">
                    <label class="prelabel" for="pro5-pass">New Password</label>
                    <input type="password" class="form-control" id="pro5-pass" name="new_password">
                </div>
                <div class="form-group">
                    <label class="prelabel" for="pro5-confirm">Confirm New Password</label>
                    <input type="password" class="form-control" id="pro5-confirm" name="confirm_new_password">
                </div>
            </div>

            <div class="col-xl-12 col-lg-12 col-md-12">
                <div class="form-group">
                    <div class="mt-4"></div>
                    <button type="submit" class="btn btn-block btn-danger btn-save">Save</button>
                </div>
            </div>
     </form>
    </div>







<footer class="footer">
    <div class="page-up">
        <a href="#" id="scrollToTopButton"><span class="arrow_carrot-up"></span></a>
    </div>
  </footer>
  <!-- Footer Section End -->

  <!-- Search model Begin -->
  <div class="search-model">
    <div class="h-100 d-flex align-items-center justify-content-center">
        <div class="search-close-switch"><i class="icon_close"></i></div>
        <form class="search-model-form">
            <input type="text" id="search-input" placeholder="Search here.....">
        </form>
    </div>
</div>
<script>
  function toggleSidebar() {
    const sidebar = document.getElementById("sidebar");
    if (sidebar.style.width === "250px") {
      sidebar.style.width = "0";
    } else {
      sidebar.style.width = "250px";
    }
  }
  </script>

    <script>
        // Profile dropdown toggle
document.getElementById("profileBtn").addEventListener("click", function(e){
    e.stopPropagation();
    document.getElementById("dropdownMenu").classList.toggle("show");
});
document.addEventListener("click", function(){
    document.getElementById("dropdownMenu").classList.remove("show");
});

// Live preview on Edit Profile page
const avatarInput = document.getElementById('avatar-upload');
if (avatarInput) {
    avatarInput.addEventListener('change', function(e){
        const [file] = e.target.files;
        if(file){
            document.getElementById('profilePreview').src = URL.createObjectURL(file);
        }
    });
}

    </script>

<!-- Js Plugins -->
<script src="{% static 'web/js/jquery-3.3.1.min.js' %}"></script>
<script src="{% static 'web/js/bootstrap.min.js' %}"></script>
<script src="{% static 'web/js/player.js' %}"></script>
<script src="{% static 'web/js/jquery.nice-select.min.js' %}"></script>
<script src="{% static 'web/js/mixitup.min.js' %}"></script>
<script src="{% static 'web/js/jquery.slicknav.js' %}"></script>
<script src="{% static 'web/js/owl.carousel.min.js' %}"></script>
<script src="{% static 'web/js/main.js' %}"></script>
</body>
</html>